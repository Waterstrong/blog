<% if (is_post()){ %>
<div class="scroll <% if(theme.hide_sidebar) { %>mid-col-pulled<% } %>" id="post-nav-button">
    <% if (false){ %>
    <a href="<%- url_for(post.prev.path) %>" title="上一篇: <%= post.prev.title %>">
        <i class="fa fa-angle-left"></i>
    </a>
    <% } else { %>
    <a href="/" title="回到首页"><i class="fa fa-home"></i></a>
    <% } %>
    <a title="文章列表"><i class="fa fa-bars"></i><i class="fa fa-times"></i></a>
    <% if (false){ %>
    <a href="<%- url_for(post.next.path) %>" title="下一篇: <%= post.next.title %>">
        <i class="fa fa-angle-right"></i>
    </a>
    <% } else { %>
    <a href="/" title="回到首页"><i class="fa fa-home"></i></a>
    <% } %>
</div>
<%- list_posts({amount: 999}) %>

<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script>
    (function ($) {
        var SidebarNav = function () {
            this.$sidebarNavBtn = $("#post-nav-button > a:nth-child(2)");
            this.leftColPulled = "left-col-pulled";
            this.midColPulled = "mid-col-pulled";
            this.$leftColSelector = $("#post-left-col");
            this.$midColSelector = $("#post-mid-col");
            this.$navBtnSelector = $("#post-nav-button");
            this.$scrollSelector = $("#scroll");
        };

        SidebarNav.prototype = {
            run: function () {
                var self = this;
                self.$sidebarNavBtn.click(function () {
                    self.isSidebarShown() ? self.hideSidebar() : self.showSidebar();
                });
            },
            showSidebar: function () {
                var self = this;
                self.$leftColSelector.removeClass(self.leftColPulled);
                self.$midColSelector.removeClass(self.midColPulled);
                self.$navBtnSelector.removeClass(self.midColPulled);
                self.$scrollSelector.removeClass(self.midColPulled);
            },
            hideSidebar: function () {
                var self = this;
                self.$leftColSelector.addClass(self.leftColPulled);
                self.$midColSelector.addClass(self.midColPulled);
                self.$navBtnSelector.addClass(self.midColPulled);
                self.$scrollSelector.addClass(self.midColPulled);
            },
            isSidebarShown: function () {
                var self = this;
                return !self.$leftColSelector.hasClass(self.leftColPulled);
            }
        };

        $(document).ready(function () {
            new SidebarNav().run();
        });
    })(jQuery);
</script>
<% } %>